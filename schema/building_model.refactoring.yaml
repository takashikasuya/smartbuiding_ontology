id: https://www.sbco.or.jp/ont/schema
name: building_model
title: Smart Building Model
description: 'A LinkML schema for sites, buildings, spaces, equipment, and points
  used in smart-building data exchanges.

  '
default_prefix: sbco
default_range: string
prefixes:
  linkml: https://w3id.org/linkml/
  sbco: https://www.sbco.or.jp/ont/
  gutp: https://smart-building-ontology.org/gutp/
  rec: https://w3id.org/rec/
  brick: https://brickschema.org/schema/Brick#
  bot: https://w3id.org/bot#
  xsd: http://www.w3.org/2001/XMLSchema#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
imports:
- linkml:types

types:
  Dtmi:
    base: string
    uri: xsd:string
    pattern: "^dtmi:[A-Za-z0-9_:.;-]+$"

    
enums:
  UnitEnum:
    description: Allowed measurement units
    permissible_values:
      celsius:
        description: Degree Celsius
        annotations:
        - tag: text
          value: °C
      percent:
        description: Percent
        annotations:
        - tag: text
          value: '%'
      ppm:
        description: Parts per million
        annotations:
        - tag: text
          value: ppm
  PointSpecificationEnum:
    description: Point specification categories for equipment point lists
    annotations:
      - tag: description_ja
        value: "設備のポイントリストで示される、ポイントの区分"
    permissible_values:
      Alarm:
        description: "Alarm point"
        annotations:
          - tag: description_ja
            value: "警報"
      Command:
        description: "Control command point"
        annotations:
          - tag: description_ja
            value: "制御"
      Setpoint:
        description: "Setpoint configuration point"
        annotations:
          - tag: description_ja
            value: "設定"
      Measurement:
        description: "Measurement point"
        annotations:
          - tag: description_ja
            value: "計測"
      Metering:
        description: "Metering point"
        annotations:
          - tag: description_ja
            value: "計量"
      Status:
        description: "Status indication point"
        annotations:
          - tag: description_ja
            value: "状態"
  SubstanceEnum:
    description: Types of substances that can be fed between equipment
    permissible_values:
      ACElec:
        description: "AC Electricity"
      Air:
        description: "Air"
      BlowdownWater:
        description: "Blowdown Water"
      ChilledWater:
        description: "Chilled Water"
      ColdDomesticWater:
        description: "Cold Domestic Water"
      Condensate:
        description: "Condensate"
      CondenserWater:
        description: "Condenser Water"
      DCElec:
        description: "DC Electricity"
      Diesel:
        description: "Diesel"
      DriveElec:
        description: "Drive Electricity"
      Ethernet:
        description: "Ethernet"
      ExhaustAir:
        description: "Exhaust Air"
      Freight:
        description: "Freight"
      FuelOil:
        description: "Fuel Oil"
      Gasoline:
        description: "Gasoline"
      GreaseExhaustAir:
        description: "Grease Exhaust Air"
      HotDomesticWater:
        description: "Hot Domestic Water"
      HotWater:
        description: "Hot Water"
      IrrigationWater:
        description: "Irrigation Water"
      Light:
        description: "Light"
      MakeupWater:
        description: "Makeup Water"
      NaturalGas:
        description: "Natural Gas"
      NonPotableDomesticWater:
        description: "Non-Potable Domestic Water"
      OutsideAir:
        description: "Outside Air"
      People:
        description: "People"
      Propane:
        description: "Propane"
      RecircHotDomesticWater:
        description: "Recirculating Hot Domestic Water"
      Refrig:
        description: "Refrigerant"
      ReturnAir:
        description: "Return Air"
      SprinklerWater:
        description: "Sprinkler Water"
      Steam:
        description: "Steam"
      StormDrainage:
        description: "Storm Drainage"
      SupplyAir:
        description: "Supply Air"
      TransferAir:
        description: "Transfer Air"
      WasteVentDrainage:
        description: "Waste Vent Drainage"
      Water:
        description: "Water"
  QuantityEnum:
    description: "Physical quantities that can be measured or monitored by points"
    annotations:
      - tag: description_ja
        value: "ポイントで測定・監視可能な物理量"
    permissible_values:
      Absolute_Humidity:
        description: "Absolute humidity measurement"
      Acceleration_Time:
        description: "Time required for acceleration"
      Active_Energy:
        description: "Active electrical energy"
      Active_Power:
        description: "Active electrical power"
      Air_Quality:
        description: "Air quality measurement"
      Alternating_Current_Frequency:
        description: "AC frequency measurement"
      Ammonia_Concentration:
        description: "Ammonia concentration in air"
      Angle:
        description: "Angular measurement"
      Apparent_Energy:
        description: "Apparent electrical energy"
      Apparent_Power:
        description: "Apparent electrical power"
      Atmospheric_Pressure:
        description: "Atmospheric pressure measurement"
      CO2_Concentration:
        description: "Carbon dioxide concentration"
      CO_Concentration:
        description: "Carbon monoxide concentration"
      Capacity:
        description: "Storage or processing capacity"
      Cloudage:
        description: "Cloud coverage measurement"
      Complex_Power:
        description: "Complex electrical power"
      Conductivity:
        description: "Electrical or thermal conductivity"
      Current_Angle:
        description: "Electrical current phase angle"
      Current_Imbalance:
        description: "Current imbalance in multi-phase systems"
      Current_Total_Harmonic_Distortion:
        description: "Total harmonic distortion of current"
      Deceleration_Time:
        description: "Time required for deceleration"
      Dewpoint:
        description: "Dew point temperature"
      Differential_CO2_Concentration:
        description: "Differential carbon dioxide concentration"
      Differential_CO_Concentration:
        description: "Differential carbon monoxide concentration"
      Differential_Dry_Bulb_Temperature:
        description: "Temperature difference (dry bulb)"
      Differential_Dynamic_Pressure:
        description: "Dynamic pressure difference"
      Differential_Pressure:
        description: "Pressure difference measurement"
      Differential_Static_Pressure:
        description: "Static pressure difference"
      Differential_Temperature:
        description: "Temperature difference"
      Direction:
        description: "Directional measurement"
      Dry_Bulb_Temperature:
        description: "Dry bulb temperature"
      Dynamic_Pressure:
        description: "Dynamic pressure measurement"
      Electric_Current:
        description: "Electrical current measurement"
      Electric_Energy:
        description: "Electrical energy measurement"
      Electric_Power:
        description: "Electrical power measurement"
      Energy:
        description: "General energy measurement"
      Enthalpy:
        description: "Enthalpy measurement"
      Flow:
        description: "Flow rate measurement"
      Flow_Loss:
        description: "Flow loss measurement"
      Formaldehyde_Concentration:
        description: "Formaldehyde concentration in air"
      Frequency:
        description: "Frequency measurement"
      GrainsOfMoisture:
        description: "Moisture content in grains per pound"
      Humidity:
        description: "General humidity measurement"
      Illuminance:
        description: "Illuminance measurement"
      Irradiance:
        description: "Irradiance measurement"
      Level:
        description: "Level measurement"
      Linear_Speed:
        description: "Linear speed measurement"
      Luminance:
        description: "Luminance measurement"
      Luminous_Flux:
        description: "Luminous flux measurement"
      Luminous_Intensity:
        description: "Luminous intensity measurement"
      Mass:
        description: "Mass measurement"
      Methane_Concentration:
        description: "Methane concentration in air"
      NO2_Concentration:
        description: "Nitrogen dioxide concentration"
      Occupancy:
        description: "Occupancy detection"
      Occupancy_Count:
        description: "Number of occupants"
      Occupancy_Percentage:
        description: "Occupancy percentage"
      Operative_Temperature:
        description: "Operative temperature measurement"
      Ozone_Concentration:
        description: "Ozone concentration in air"
      PM10_Concentration:
        description: "PM10 particulate matter concentration"
      PM1_Concentration:
        description: "PM1 particulate matter concentration"
      PM2_5_Concentration:
        description: "PM2.5 particulate matter concentration"
      Peak_Power:
        description: "Peak power measurement"
      Phasor:
        description: "Phasor measurement"
      Phasor_Angle:
        description: "Phasor angle measurement"
      Phasor_Magnitude:
        description: "Phasor magnitude measurement"  
      Position:
        description: "Position measurement"
      Power:
        description: "General power measurement"
      Power_Factor:
        description: "Power factor measurement"
      Precipitation:
        description: "Precipitation measurement"
      Pressure:
        description: "General pressure measurement"
      Radiance:
        description: "Radiance measurement"
      Radiant_Temperature:
        description: "Radiant temperature measurement"
      Radioactivity_Concentration:
        description: "Radioactivity concentration"
      Radon_Concentration:
        description: "Radon concentration in air"
      Reactive_Energy:
        description: "Reactive electrical energy"
      Reactive_Power:
        description: "Reactive electrical power"
      Real_Power:
        description: "Real electrical power"
      Relative_Humidity:
        description: "Relative humidity measurement"
      Rotational_Speed:
        description: "Rotational speed measurement"
      Solar_Irradiance:
        description: "Solar irradiance measurement"
      Solar_Radiance:
        description: "Solar radiance measurement"
      Speed:
        description: "General speed measurement"
      Static_Pressure:
        description: "Static pressure measurement"
      TVOC_Concentration:
        description: "Total volatile organic compounds concentration"
      Temperature:
        description: "General temperature measurement"
      Thermal_Energy:
        description: "Thermal energy measurement"
      Thermal_Power:
        description: "Thermal power measurement"
      Time:
        description: "Time measurement"
      Torque:
        description: "Torque measurement"
      Velocity_Pressure:
        description: "Velocity pressure measurement"
      Voltage:
        description: "Electrical voltage measurement"
      Voltage_Angle:
        description: "Voltage phase angle"
      Voltage_Imbalance:
        description: "Voltage imbalance in multi-phase systems"
      Weather_Condition:
        description: "Weather condition measurement"
      Wet_Bulb_Temperature:
        description: "Wet bulb temperature measurement"
      Wind_Direction:
        description: "Wind direction measurement"
  AggregateEnum:
    description: "Aggregation functions for point data processing"
    annotations:
      - tag: description_ja
        value: "ポイントデータ処理のための集約関数"
    permissible_values:
      average:
        description: "Average value"
      sum:
        description: "Sum of values"
      minimum:
        description: "Minimum value"
      maximum:
        description: "Maximum value"
      count:
        description: "Count of values"
      first:
        description: "First value"
      last:
        description: "Last value"
      median:
        description: "Median value"
      standardDeviation:
        description: "Standard deviation"

slots:
  
  identifiers:
    description: map(string -> string)
    multivalued: true
    range: KeyStringMapEntry
    inlined: true
    inlined_as_list: true
    required: true

  customTags:
    description: map(string -> boolean)
    multivalued: true
    range: KeyBoolMapEntry
    inlined: true
    inlined_as_list: true

  customProperties:
    description: map(string -> map(string -> string))
    multivalued: true
    range: KeyMapOfStringMapEntry
    inlined: true
    inlined_as_list: true

  name:
    description: Machine or Human-readable name
    range: string
    required: true

  sites:
    description: Sites contained by a higher-level container (rarely used)
    range: Site
    multivalued: true
    inlined_as_list: true
  
  buildings:
    description: Buildings in a site
    range: Building
    multivalued: true
    inlined_as_list: true
  
  levels:
    description: Levels in a building
    range: Level
    multivalued: true
    inlined_as_list: true
  
  spaces:
    description: Spaces within a building or level
    range: Space
    multivalued: true
    inlined_as_list: true
  
  equipmentList:  # equipment_list → equipmentList
    description: Equipment installed in a space
    range: Equipment
    multivalued: true
    inlined_as_list: true
  
  points:
    description: Points (sensors/actuators) attached to equipment
    range: Point
    multivalued: true
    inlined_as_list: true
  
  site:
    description: Parent site
    range: Site
  building:
    description: Parent building
    range: Building
  level:
    description: Parent level
    range: Level
  space:
    description: Parent space
    range: Space
  
  equipment:
    description: Parent equipment
    range: Equipment

  enabled:
    description: Whether the point is enabled/active
    range: boolean
    ifabsent: true
  
  key:
    description: "Key of the map entry"
    range: string
  value:
    description: "Value of the map entry"
    range: string

  flag:
    description: "Boolean flag value"
    range: boolean
    required: true

  entries:
    description: "Nested map entries"
    multivalued: true
    range: KeyStringMapEntry
    inlined: true
    inlined_as_list: true
    required: true


  pointType:  # point_type → pointType
    description: "Point type - a profile or template name used to refer to the telemetry format obtainable from the device or point. Specific definitions are provided separately in schema files."
    range: string
    required: true
    annotations:
      - tag: description_ja
        value: "ポイントタイプ - 機器やポイントから取得できるテレメトリのフォーマットを参照するためのプロファイル名、またはテンプレート名。具体的な定義については、スキーマファイル等で当該タイプについては別途定義される。"
  
  pointSpecification:  # point_specification → pointSpecification
    description: "Point specification category as shown in equipment point list. English is recommended."
    range: PointSpecificationEnum
    annotations:
      - tag: description_ja
        value: "設備のポイントリストで示される、ポイントの区分を明示。"
  unit:
    description: Measurement unit (enum key; symbol can be taken from annotations)
    range: UnitEnum
  minPresValue:  # min_pres_value → minPresValue
    description: Minimum plausible reading
    range: float
  maxPresValue:  # max_pres_value → maxPresValue
    description: Maximum plausible reading
    range: float

  geometry:
    description: Polygon representing the spatial extent of this Space.
    range: Geometry
    multivalued: false

  georeference:
    description: A georeference creates a relationship between the local coordinate system used within a building (e.g., measured in meters) and a geographic coordinate system (e.g., lat, long, alt), such that locally placed Spaces can be resolved and rendered in that geographic coordinate system (e.g., for mapping purposes).
    range: Georeference
    multivalued: false


  hasPart:
    description: The subject is composed in part of the entity given by the object.
    any_of:
      - range : Space
      - range : Resource
    multivalued: true

  isPartOf:
    range: Space
    any_of:
      - range : Space
      - range : Resource
    multivalued: false

  isLocationOf:
    description: Subject is the physical location encapsulating the object.
    range: Resource
    multivalued: true
    inverse: locatedIn

  area:
    description: "Area of the architecture"
    any_of:
      - range: Resource
      - range: ArchitectureArea
    slot_uri: rec:area
    
  capacity:
    description: "Capacity of the architecture"
    any_of:
      - range: Resource
      - range: ArchitectureCapacity
    slot_uri: rec:capacity

classes:
 
  KeyStringMapEntry:
    description: map(string -> string) の1エントリ
    slots:
    - key
    - value
    slot_usage:
      key:
        required: true
      value:
        required: true

  KeyBoolMapEntry:
    description: map(string -> boolean) の1エントリ
    slots:
    - key
    - flag
    slot_usage:
      key:
        required: true
      flag:
        required: true

  KeyMapOfStringMapEntry:
    description: map(string -> map(string -> string)) の1エントリ
    slots:
    - key
    - entries
    slot_usage:
      key:
        required: true
      entries:
        multivalued: true
        range: KeyStringMapEntry
        inlined: true
        inlined_as_list: true

  Space:
    class_uri: rec:Space
    description: A contiguous part of the physical world that contains or can contain sub-spaces. E.g., a Region can contain many Sites, which in turn can contain many Buildings.
    annotations:
    - tag: description_ja
      value: 室やゾーンなどの空間単位。設備を含みうる。
    slots:
    # relationships
    - geometry
    - georeference
    - hasPart
    - isLocationOf
    - isPartOf
    # properties
    - customProperties  # custom_properties → customProperties
    - customTags       # custom_tags → customTags
    - identifiers
    - name
  
  Architecture:
    is_a: Space
    class_uri: rec:Architecture
    description: A designed/landscaped (or potentially designed/landscaped) part of the physical world that has a 3D spatial extent. E.g., a building site, a building, levels within the building, rooms, etc.
    slots:
    - area
    - capacity
    # New slots from REC Architecture schema
    - address
    - adjacentElement
    - architectedBy
    - constructedBy
    - containsElement
    - documentation
    - hasPoint
    - intersectingElement
    - isFedBy
    - operatedBy
    - ownedBy
    
  Site:
    is_a: Architecture
    class_uri: rec:Site
    description: A piece of land upon which zero or more buildings may be situated.
    annotations:
    - tag: description_ja
      value: サイト。複数の建物を含みうる。


  Building:
    is_a: Architecture
    class_uri: rec:Building
    description: A building which is part of a site.
    annotations:
    - tag: description_ja
      value: サイトの一部である建物。

  Level:
    is_a: Architecture
    class_uri: rec:Level
    description: A building storey. Levels can also be treated as a kind of space.
    annotations:
    - tag: description_ja
      value: 建物のフロア。スペースの一種として扱える。
    slots:
    - levelNumber

  # Base Resource class
  Resource:
    class_uri: rdfs:Resource
    description: "Base class for all resources"

  # Asset class
  Asset:
    is_a: Resource
    class_uri: rec:Asset
    description: "Something which is placed inside of a building, but is not an integral part of that building's structure; e.g., furniture, equipment, systems, etc."
    annotations:
      - tag: description_ja
        value: "建物内に配置されるが、建物構造の不可欠な部分ではないもの。例：家具、設備、システムなど。"
    slots:
      - commissionedBy
      - documentation
      - geometry
      - hasPart
      - hasPoint
      - installedBy
      - isPartOf
      - locatedIn
      - manufacturedBy
      - mountedOn
      - servicedBy
      # properties
      - assetTag
      - commissioningDate
      - customProperties  # custom_properties → customProperties
      - customTags       # custom_tags → customTags
      - identifiers
      - initialCost
      - installationDate
      - IPAddress        
      - MACAddress       
      - maintenanceInterval
      - modelNumber
      - name
      - serialNumber
      - turnoverDate
      - weight
       
  Equipment:
    is_a: Asset
    class_uri: brick:Equipment
    description: "An equipment asset installed in a space."
    annotations:
    - tag: description_ja
      value: "空間に設置された設備アセット。"
    slots:
      - feeds
      - isFedBy
      - operationalStageCount
    
    slot_usage:
      locatedIn:
        range: Space  # Equipment is specifically located in spaces

  Point:
    class_uri: brick:Point
    description: A sensor, actuator, or data point associated with equipment.
    annotations:
    - tag: description_ja
      value: 設備に紐づくセンサー/アクチュエータ/データポイント。
    slots:
    - isPointOf
    # properties
    - aggregate
    - customProperties  # costomProperties → customProperties (タイポ修正)
    - customTags       # custom_tags → customTags
    - hasQuantity
    - hasSubstance
    - identifiers
    - name
  
  Geometry:
    description: REC Geometry のプレースホルダ（詳細は別途拡張）

  Georeference:
    description: REC Georeference のプレースホルダ（詳細は別途拡張）
